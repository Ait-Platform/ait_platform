{% extends "layout.html" %}
{% block title %}New Lesson — Reading (Admin){% endblock %}
{% block content %}
<div class="max-w-xl mx-auto px-4 py-10">
  <div class="flex items-center justify-between mb-4">
    <a href="{{ url_for('admin_bp.lessons', subject='reading') }}"
       class="rounded-xl border px-3 py-2 text-sm hover:bg-slate-50">← Back</a>
    <a href="{{ url_for('reading_bp.learner_dashboard') }}" target="_blank"
       class="rounded-xl border px-3 py-2 text-sm hover:bg-slate-50">View as learner</a>
  </div>

  <h1 class="text-2xl font-semibold mb-2">New Lesson</h1>
  <p class="text-slate-600 mb-6">
    Add a lesson (media is served from <code>/static/</code>; if you enter only a filename we default to <code>/static/videos/</code>).
  </p>

  <form method="post" class="bg-white rounded-xl border border-slate-200 shadow p-5 space-y-4">
    {% if csrf_token is defined %}
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    {% endif %}

    <div>
      <label class="block text-sm font-medium text-slate-700">Title <span class="text-rose-600">*</span></label>
      <input name="title" value="{{ title or '' }}" required
             class="mt-1 block w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm
                    shadow-sm placeholder-slate-400 focus:border-sky-500 focus:ring-2 focus:ring-sky-200">
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700">Caption</label>
      <input name="caption" value="{{ caption or '' }}"
             class="mt-1 block w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm
                    shadow-sm placeholder-slate-400 focus:border-sky-500 focus:ring-2 focus:ring-sky-200">
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700">Media filename (optional)</label>
      <input name="video_filename" value="{{ video_filename or '' }}" placeholder="videos/intro.mp4 or images/palm.png or docs/sheet.pdf"
             class="mt-1 block w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm
                    shadow-sm placeholder-slate-400 focus:border-sky-500 focus:ring-2 focus:ring-sky-200">
      <p class="mt-1 text-xs text-slate-500">
        Path is <strong>relative to</strong> <code>/static/</code>. Examples:
        <code>videos/intro.mp4</code>, <code>images/palm.png</code>.
        If you enter just a filename (e.g. <code>intro.mp4</code>), we’ll look under <code>/static/videos/</code> by default.
        Allowed: mp4, webm, ogg, png, jpg, jpeg, gif, webp, svg, pdf.
      </p>
    </div>

    <div class="flex items-center justify-between pt-2">
      <a href="{{ url_for('admin_bp.lessons', subject='reading') }}" class="text-sky-600 hover:underline text-sm">← Cancel</a>
      <button type="submit" class="rounded-xl bg-emerald-600 text-white px-4 py-2 hover:bg-emerald-700">Create</button>
    </div>
  </form>
</div>
{% endblock %}
