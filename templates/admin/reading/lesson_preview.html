{% extends "layout.html" %}
{% block content %}
<div class="container mx-auto py-10 max-w-3xl">
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-xl font-semibold">Preview â€” {{ lesson.title }}</h1>
    <a href="{{ url_for('admin_bp.reading_lessons') }}" class="btn btn-light">Back</a>
  </div>

  {% if media_relpath %}
    {% set ext = media_relpath.rsplit('.', 1)[-1] | lower %}
    {% if ext in ['mp4','webm','ogg'] %}
      <video controls playsinline style="width:100%;max-height:70vh">
        <source src="{{ url_for('static', filename=media_relpath) }}">
        Your browser does not support the video tag.
      </video>
    {% elif ext in ['png','jpg','jpeg','gif','webp','svg'] %}
      <div class="text-center">
        <img src="{{ url_for('static', filename=media_relpath) }}" 
            alt="{{ lesson.title }}" 
            class="img-fluid rounded shadow"
            style="max-width: 80%; height: auto; margin: 20px auto;">
      </div>
    {% elif ext == 'pdf' %}
      <iframe src="{{ url_for('static', filename=media_relpath) }}"
              style="width:100%;height:75vh;border:1px solid #e5e7eb;border-radius:12px;"></iframe>
    {% else %}
      <div class="rounded-xl border bg-white p-4">
        <p class="text-sm text-slate-700">
          Unsupported media type for <code>{{ media_relpath }}</code>.
        </p>
      </div>
    {% endif %}
  {% else %}
    <div class="rounded-xl border bg-white p-4">
      <p class="text-sm text-slate-700">No media set for this lesson.</p>
    </div>
  {% endif %}

  {% if lesson.caption %}
    <p class="mt-4 text-slate-600">{{ lesson.caption }}</p>
  {% endif %}

  <!--div class="mt-6">
    <a href="{{ url_for('admin_bp.reading_lessons') }}" class="btn btn-primary">Back to Manage Lessons</a>
  </div-->
</div>
{% endblock %}
