{# templates/payment_success.html #}
{% extends "layout.html" %}
{% block title %}Payment received · AIT{% endblock %}
{% block content %}
<div class="mx-auto max-w-xl mt-8 rounded-2xl border p-6 bg-white">
  <h1 class="text-xl font-semibold text-emerald-700">Thanks — payment received</h1>
  <p class="mt-2 text-slate-700">
    We’re confirming your payment in the background. You’ll be redirected to your dashboard in a moment.
  </p>

  <div class="mt-5 flex items-center gap-3 text-slate-500">
    <!--svg class="animate-spin h-5 w-5" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/>
      <path class="opacity-75" fill="currentColor"
            d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"/>
    </svg>
    <span>Redirecting…</span-->
  </div>

  <div class="mt-6">
    {% if current_user.is_authenticated %}
      <a href="{{ url_for('auth_bp.bridge_dashboard') }}"
        class="inline-flex items-center rounded-lg border px-3 py-1 text-sm hover:bg-slate-50">
        Continue to Dashboard →
      </a>
      <script>
        setTimeout(function () {
          window.location.href = "{{ url_for('auth_bp.bridge_dashboard') }}";
        }, 2000);
      </script>
    {% else %}
      <p class="mt-2 text-slate-700">Please sign in to view your course.</p>
      <a href="{{ url_for('auth_bp.login', next=url_for('auth_bp.bridge_dashboard')) }}"
        class="inline-flex items-center rounded-lg border px-3 py-1 text-sm hover:bg-slate-50">
        Sign in to Continue →
      </a>
    {% endif %}
  </div>


</div>

<!--script>
  // Soft redirect after 2.5s; IPN will have flipped access by then.
  setTimeout(function () {
    window.location.href = "{{ url_for('auth_bp.bridge_dashboard') }}";
  }, 2500);
</script-->
{% endblock %}

