{% extends "layout.html" %}
{% block title %}BudgetCash · Income & Expense Statement{% endblock %}

{% block content %}
<div class="mx-auto max-w-5xl mt-10 bg-white shadow rounded-lg p-6">

  <div class="flex items-center justify-between gap-4">
    <div>
      <h1 class="text-lg font-semibold text-slate-900">Income & Expense Statement</h1>
      <div class="text-sm text-slate-500 mt-1">Period: <b>{{ period }}</b></div>
    </div>

    <form method="get" action="{{ url_for('budget_bp.report_income_expense') }}"
          class="flex items-center gap-3">
      <input type="month" name="period" value="{{ period }}"
             class="rounded border border-slate-300 px-3 py-2 text-sm">
      <button class="rounded bg-slate-900 text-white px-4 py-2 text-sm font-medium hover:bg-slate-800">Go</button>

      <button type="button" onclick="window.print()"
              class="rounded border border-slate-300 px-4 py-2 text-sm hover:bg-slate-50">
        Print
      </button>

      <!--a href="{{ url_for('budget_bp.ledger') }}"
         class="rounded border border-slate-300 px-4 py-2 text-sm hover:bg-slate-50">
        ← Back
      </a-->

      <a href="{{ back_url }}"
          class="rounded border border-slate-300 px-3 py-1.5 hover:bg-slate-50">
          ← Back
      </a>
    </form>
  </div>

  <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8">

    <!-- INCOME -->
    <div>
      <div class="font-semibold text-slate-900 mb-3">Income</div>

      {% if income_rows and income_rows|length %}
        <div class="border border-slate-200 rounded overflow-hidden">
          <div class="divide-y divide-slate-200">
            {% for r in income_rows %}
              <div class="flex justify-between px-4 py-3">
                <div>{{ r.name }}</div>
                <div class="font-medium">{{ '%.2f'|format((r.cents or 0)/100) }}</div>
              </div>
            {% endfor %}
          </div>

          <div class="flex justify-between px-4 py-3 bg-slate-50 border-t border-slate-200">
            <div class="font-semibold">Total income</div>
            <div class="font-semibold">{{ '%.2f'|format((income_total_cents or 0)/100) }}</div>
          </div>
        </div>
      {% else %}
        <div class="text-slate-500">No income</div>
        <div class="flex justify-between mt-4 pt-4 border-t border-slate-200 text-sm">
          <div class="font-semibold">Total income</div>
          <div class="font-semibold">{{ '%.2f'|format((income_total_cents or 0)/100) }}</div>
        </div>
      {% endif %}
    </div>

    <!-- EXPENSES -->
    <div>
      <div class="font-semibold text-slate-900 mb-3">Expenses</div>

      {% if expense_rows and expense_rows|length %}
        <div class="border border-slate-200 rounded overflow-hidden">
          <div class="divide-y divide-slate-200">
            {% for r in expense_rows %}
              <div class="flex justify-between px-4 py-3">
                <div>{{ r.name }}</div>
                <div class="font-medium">{{ '%.2f'|format((r.cents or 0)/100) }}</div>
              </div>
            {% endfor %}
          </div>

          <div class="flex justify-between px-4 py-3 bg-slate-50 border-t border-slate-200">
            <div class="font-semibold">Total expenses</div>
            <div class="font-semibold">{{ '%.2f'|format((expense_total_cents or 0)/100) }}</div>
          </div>
        </div>
      {% else %}
        <div class="text-slate-500">No expenses</div>
        <div class="flex justify-between mt-4 pt-4 border-t border-slate-200 text-sm">
          <div class="font-semibold">Total expenses</div>
          <div class="font-semibold">{{ '%.2f'|format((expense_total_cents or 0)/100) }}</div>
        </div>
      {% endif %}
    </div>

  </div>

  <div class="mt-8 rounded border border-slate-200 bg-slate-50 p-4 flex justify-between">
    <div class="font-semibold text-slate-900">Net cash movement</div>
    <div class="font-semibold text-slate-900">{{ '%.2f'|format((net_cents or 0)/100) }}</div>
  </div>

</div>
{% endblock %}
