{% extends "layout.html" %}
{% block title %}Redirecting to PayFast…{% endblock %}

{% block content %}
<div class="mx-auto max-w-md py-12 text-center">
  <h1 class="text-xl font-semibold mb-4">Redirecting to PayFast…</h1>
  <p class="text-slate-600 mb-6">
    You’re being redirected to our secure payment partner to complete your payment.
  </p>

  <form id="payfastForm" action="{{ payfast_url }}" method="post">
    {% for name, value in pf_data.items() %}
      <input type="hidden" name="{{ name }}" value="{{ value }}">
    {% endfor %}
    <noscript>
      <p class="mb-4 text-sm text-slate-600">
        JavaScript is disabled. Please click the button below to continue.
      </p>
      <button type="submit" class="btn btn-primary">Continue to PayFast</button>
    </noscript>
  </form>

  <p class="text-xs text-slate-400 mt-6">
    If nothing happens, please check your pop-up blocker.
  </p>
</div>

<script>
  document.getElementById("payfastForm").submit();
</script>
{% endblock %}
