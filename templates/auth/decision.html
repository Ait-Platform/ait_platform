{% extends "layout.html" %}
{% block title %}Registration summary{% endblock %}

{% block content %}
<div class="mx-auto max-w-3xl mt-10 rounded-2xl border bg-white shadow-sm">
  <div class="h-1.5 w-full rounded-t-2xl bg-blue-600"></div>

  <div class="px-6 py-5 border-b flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4">
    <div>
      <h2 class="text-xl font-semibold text-slate-900">Your Registration Summary</h2>
      {% if email %}
        <p class="text-sm text-slate-600 mt-1">
          For <span class="font-medium">{{ email }}</span>
        </p>
      {% endif %}
    </div>

    <div class="sm:text-right">
      {% if cta_url %}
        <a class="inline-flex items-center rounded-lg bg-blue-600 text-white px-4 py-2 text-sm font-medium hover:bg-blue-700"
           href="{{ cta_url }}">
          {{ cta_label }}
        </a>
      {% else %}
        <form method="POST" action="{{ url_for('auth_bp.register_decision') }}">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
          <input type="hidden" name="email" value="{{ email }}">
          <input type="hidden" name="subject" value="{{ subject_slug }}">
          <button
            class="inline-flex items-center rounded-lg bg-blue-600 text-white px-4 py-2 text-sm font-medium hover:bg-blue-700">
            {{ cta_label }}
          </button>
        </form>
      {% endif %}
    </div>
  </div>

  <div class="px-6 py-5">

    <div class="mt-4 space-y-3">
      {% for s in subjects %}
        <div class="flex items-center justify-between rounded-lg border px-4 py-3">
          <div class="text-slate-900 font-medium">
            Subject: {{ s.name }}
          </div>

          {% if s.enrolled %}
            <span class="inline-flex items-center rounded-md bg-emerald-50 px-2 py-1 text-sm font-medium text-emerald-700 border border-emerald-200">
              already enrolled
            </span>
          {% elif s.pending %}
            <span class="inline-flex items-center rounded-md bg-amber-50 px-2 py-1 text-sm font-medium text-amber-700 border border-amber-200">
              pending payment
            </span>
          {% else %}
            <span class="inline-flex items-center rounded-md bg-slate-50 px-2 py-1 text-sm font-medium text-slate-700 border border-slate-200">
              not enrolled
            </span>
          {% endif %}

        </div>
      {% endfor %}
    </div>


  </div>
</div>
{% endblock %}
